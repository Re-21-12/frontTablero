<section class="panel">
  <header class="panel__header">
    <h2 class="panel__title">Jugadores</h2>
  </header>

  <div class="toolbar form">
    <div class="field">
      <label class="label">Nombre</label>
      <input class="input" [(ngModel)]="nombre" placeholder="Nombre"
             (keyup)="validarNombre(nombre)" (keyup.enter)="crear()" />
    </div>

    <div class="field">
      <label class="label">Apellido</label>
      <input class="input" [(ngModel)]="apellido" placeholder="Apellido"
             (keyup)="validarNombre(apellido)" (keyup.enter)="crear()" />
    </div>

    <div class="field">
      <label class="label">Estatura (m)</label>
      <input class="input" type="number" [(ngModel)]="estatura" min="0.1" max="3.0" step="0.01" placeholder="1.85" />
    </div>

    <div class="field">
      <label class="label">Posición</label>
      <input class="input" [(ngModel)]="posicion" placeholder="Delantero, Defensor…" />
    </div>

    <div class="field">
      <label class="label">Nacionalidad</label>
      <select class="input" [(ngModel)]="nacionalidad">
        <option [ngValue]="''">Seleccionar País</option>
        <option *ngFor="let p of paises()" [ngValue]="p.nombre">{{ p.nombre }}</option>
      </select>
    </div>

    <div class="field">
      <label class="label">Edad</label>
      <input class="input" type="number" [(ngModel)]="edad" min="1" max="99" placeholder="Edad" />
    </div>

    <div class="field">
      <label class="label">Equipo</label>
      <select class="input" [(ngModel)]="idEquipo">
        <option [ngValue]="null">Seleccionar</option>
        <option *ngFor="let e of equipos()" [ngValue]="e.id_Equipo">{{ e.nombre }}</option>
      </select>
    </div>

    <div class="field field--actions">
      <label class="label">&nbsp;</label>
      <button class="btn"
              (click)="crear()"
              [disabled]="!nombre.trim() || !apellido.trim() || !estatura || !posicion.trim() || !nacionalidad || !edad || !idEquipo || loading()">
        {{ loading() ? 'Guardando…' : 'Agregar' }}
      </button>
    </div>

    <div class="field id-group">
      <label class="label">ID</label>
      <input class="input input--id" type="number" [(ngModel)]="idCrud" min="1" placeholder="#ID" (keyup.enter)="buscarPorId()" />
    </div>

    <div class="field field--actions-sm">
      <label class="label">&nbsp;</label>
      <button class="btn btn--ghost" (click)="buscarPorId()" [disabled]="!idCrud || loading()">Buscar</button>
    </div>

    <div class="field field--actions-sm">
      <label class="label">&nbsp;</label>
      <button class="btn btn--ghost"
              (click)="editar()"
              [disabled]="!idCrud || !nombre.trim() || !apellido.trim() || !estatura || !posicion.trim() || !nacionalidad || !edad || !idEquipo || loading()">
        Editar
      </button>
    </div>

    <div class="field field--actions-sm">
      <label class="label">&nbsp;</label>
      <button class="btn btn--ghost danger" (click)="borrarPorId()" [disabled]="!idCrud || loading()">Borrar</button>
    </div>
  </div>

  <div class="list-scroll">
    <ul class="list cards">
      <li class="card" *ngFor="let j of items(); let i = index">
        <div class="card__head">
          <div class="avatar">{{ initials(j) }}</div>
          <div class="head__meta">
            <div class="title">{{ j.nombre }} {{ j.apellido }}</div>
            <div class="subtitle">#{{ j.id_Jugador }}</div>
          </div>
          <button class="btn btn--ghost" (click)="borrar(j)">Eliminar</button>
          <button class="btn" (click)="generarReporteDesdeFila(j)">Estadísticas Jugador
  </button>
        </div>
        
        <div class="grid">
          <div class="cell"><span class="tag">Estatura</span><span class="val">{{ j.estatura }} m</span></div>
          <div class="cell"><span class="tag">Posición</span><span class="val">{{ j.posicion }}</span></div>
          <div class="cell"><span class="tag">Edad</span><span class="val">{{ j.edad }}</span></div>
          <div class="cell"><span class="tag">Nacionalidad</span><span class="val">{{ j.nacionalidad }}</span></div>
          <div class="cell"><span class="tag">Equipo</span><span class="val">ID {{ j.id_Equipo }}</span></div>
        </div>
      </li>
    </ul>
  </div>

  <mat-paginator
    [length]="totalRegistros()"
    [pageSize]="tamanio"
    [pageSizeOptions]="[5, 10, 25]"
    (page)="cambiarPagina($event)">
  </mat-paginator>

</section>
