<section class="panel">
  <header class="panel__header">
    <h2 class="panel__title">Localidades</h2>
  </header>

  <div class="toolbar toolbar--one-row">
    <label class="label" for="loc-nombre">Nombre</label>
    <input
      id="loc-nombre"
      class="input"
      placeholder="Nombre"
      [(ngModel)]="locNombre"
      (keyup)="validarNombre(locNombre)"
      (keyup.enter)="crearLocalidad()"
      aria-label="Nombre de la localidad"
    />
    <span class="hint" *ngIf="errorNombre">{{ errorNombre }}</span>

    <button
      class="btn"
      (click)="crearLocalidad()"
      [disabled]="loading() || !locNombre.trim() || !!errorNombre"
    >
      {{ loading() ? 'Guardando…' : 'Agregar' }}
    </button>

    <label class="label inline" for="loc-id">ID</label>
    <input
      id="loc-id"
      class="input input--id"
      type="number"
      [(ngModel)]="idCrud"
      placeholder="#ID"
      min="1"
      (keyup.enter)="buscarPorId()"
      aria-label="ID de localidad"
    />

    <button class="btn btn--ghost" (click)="buscarPorId()" [disabled]="!idCrud || loading()">Buscar</button>
    <button
      class="btn btn--ghost"
      (click)="editarLocalidad()"
      [disabled]="!idCrud || !locNombre.trim() || loading()"
    >
      Editar
    </button>
    <button class="btn btn--ghost danger" (click)="borrarPorId()" [disabled]="!idCrud || loading()">
      Borrar
    </button>
  </div>

  <div class="list-scroll">
    <ul class="list" *ngIf="items()?.length; else emptyState">
      <li class="row-item" *ngFor="let l of items()">
        <span class="mono">#{{ l.id }}</span>
        <span class="name">{{ l.nombre }}</span>
        <button class="btn btn--ghost" (click)="borrarDesdeLista(l)">Eliminar</button>
      </li>
    </ul>

    <ng-template #emptyState>
      <div class="empty">
        <img src="assets/empty-state.svg" alt="" />
        <p>Sin localidades todavía. Agrega una arriba </p>
      </div>
    </ng-template>
  </div>

  <mat-paginator
    [length]="totalRegistros()"
    [pageSize]="tamanio"
    [pageSizeOptions]="[5, 10, 25]"
    (page)="cambiarPagina($event)">
  </mat-paginator>
</section>
