<div class="login-page">
  <div class="login-container">
    <div class="login-header">
      <h1 class="login-title">ğŸ€ Tablero Deportivo</h1>
      <p class="login-subtitle">Inicia sesiÃ³n para continuar</p>
    </div>

    <!-- Selector de mÃ©todo de autenticaciÃ³n -->
    <div class="auth-method-selector">
      <div class="toggle-container">
        <button
          type="button"
          class="toggle-btn"
          [class.active]="!useKeycloak"
          (click)="useKeycloak = false; errorMessage = ''"
        >
          Login Tradicional
        </button>
        <button
          type="button"
          class="toggle-btn"
          [class.active]="useKeycloak"
          (click)="useKeycloak = true; errorMessage = ''"
        >
          Login con Keycloak
        </button>
      </div>
    </div>

    <!-- Formulario tradicional (solo si no usa Keycloak) -->
    <form
      *ngIf="!useKeycloak"
      [formGroup]="loginForm"
      (ngSubmit)="onSubmit()"
      class="login-form"
    >
      <!-- Campo Usuario -->
      <div class="form-group">
        <label for="nombre" class="form-label">Usuario</label>
        <div class="input-wrapper">
          <input
            id="nombre"
            type="text"
            formControlName="nombre"
            class="form-input"
            [class.error]="loginForm.get('nombre')?.invalid && loginForm.get('nombre')?.touched"
            placeholder="Ingresa tu usuario"
            autocomplete="nombre"
          >
          <span class="input-icon">ğŸ‘¤</span>
        </div>
        <div class="error-message" *ngIf="getFieldError('nombre')">
          {{ getFieldError('nombre') }}
        </div>
      </div>

      <!-- Campo ContraseÃ±a -->
      <div class="form-group">
        <label for="contrasena" class="form-label">ContraseÃ±a</label>
        <div class="input-wrapper">
          <input
            id="contrasena"
            [type]="showPassword ? 'text' : 'password'"
            formControlName="contrasena"
            class="form-input"
            [class.error]="loginForm.get('contrasena')?.invalid && loginForm.get('contrasena')?.touched"
            placeholder="Ingresa tu contraseÃ±a"
            autocomplete="current-password"
          >
          <button
            type="button"
            class="password-toggle"
            (click)="togglePasswordVisibility()"
            [attr.aria-label]="showPassword ? 'Ocultar contraseÃ±a' : 'Mostrar contraseÃ±a'"
          >
            {{ showPassword ? 'ğŸ™ˆ' : 'ğŸ‘ï¸' }}
          </button>
        </div>
        <div class="error-message" *ngIf="getFieldError('contrasena')">
          {{ getFieldError('contrasena') }}
        </div>
      </div>

      <!-- BotÃ³n de envÃ­o para login tradicional -->
      <button
        type="submit"
        class="btn btn-primary btn-login"
        [disabled]="isLoading || loginForm.invalid"
      >
        <span *ngIf="!isLoading">Iniciar SesiÃ³n</span>
        <span *ngIf="isLoading" class="loading">
          <span class="spinner"></span>
          Iniciando...
        </span>
      </button>
    </form>

    <!-- SecciÃ³n Keycloak -->
    <div *ngIf="useKeycloak" class="keycloak-section">
      <div class="keycloak-info">
        <div class="keycloak-icon">ğŸ”</div>
        <h3>AutenticaciÃ³n Segura con Keycloak</h3>
        <p>Utiliza tu cuenta institucional para acceder de forma segura</p>
      </div>

      <!-- BotÃ³n de Keycloak -->
      <button
        type="button"
        class="btn btn-keycloak btn-login"
        [disabled]="isLoading"
        (click)="onSubmit()"
      >
        <span *ngIf="!isLoading" class="keycloak-btn-content">
          <span class="keycloak-icon-small">ğŸ”‘</span>
          Continuar con Keycloak
        </span>
        <span *ngIf="isLoading" class="loading">
          <span class="spinner"></span>
          Conectando...
        </span>
      </button>

      <div class="keycloak-benefits">
        <div class="benefit-item">
          <span class="benefit-icon">âœ…</span>
          <span>AutenticaciÃ³n unificada</span>
        </div>
        <div class="benefit-item">
          <span class="benefit-icon">ğŸ›¡ï¸</span>
          <span>Seguridad empresarial</span>
        </div>
        <div class="benefit-item">
          <span class="benefit-icon">ğŸ”„</span>
          <span>Single Sign-On (SSO)</span>
        </div>
      </div>
    </div>

    </div>

    <!-- Error general -->
    <div class="error-message error-message--general" *ngIf="errorMessage">
      {{ errorMessage }}
    </div>

    <div class="login-footer">
      <p class="login-help">Â¿No posees una cuenta todavÃ­a? <a class="login-link" routerLink="/registro">Registrarse</a></p>
    </div>
  </div>
